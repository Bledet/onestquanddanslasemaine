<!DOCTYPE html>
<html>
<meta charset="utf-8">

<head>
	<title>On est quand</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link href="https://fonts.googleapis.com/css2?family=Ribeye&display=swap" rel="stylesheet">
	<link rel="icon" href="icon.png" type="image/png" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
	<div class="calendar-container">
		<h1>On est quand dans la semaine ?</h1>
		<p id="simple">C'est très simple:</p>
		<div id="message"></div>
		<div id="avertissement"></div>
		<table id="calendar">
			<thead>
				<tr>
					<th class="head-table-calendar">DD</th>
					<th class="head-table-calendar">FD</th>
					<th class="head-table-calendar">M</th>
					<th class="head-table-calendar">DF</th>
					<th class="head-table-calendar">FF</th>
					<th class="head-table-calendar">DW</th>
					<th class="head-table-calendar">FW</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td class="debut body-table-calendar" id="debut-debut-debut"></td>
					<td class="debut body-table-calendar" id="debut-fin-debu"></td>
					<td class="debut body-table-calendar" id="debut-milieu"></td>
					<td class="debut body-table-calendar" id="debut-debut-fin"></td>
					<td class="debut body-table-calendar" id="debut-fin-fin"></td>
					<td class="debut body-table-calendar" id="debut-debut-week"></td>
					<td class="debut body-table-calendar" id="debut-fin-week"></td>
				</tr>
				<tr>
					<td class="milieu body-table-calendar" id="milieu-debut-debut"></td>
					<td class="milieu body-table-calendar" id="milieu-fin-debu"></td>
					<td class="milieu body-table-calendar" id="milieu-milieu"></td>
					<td class="milieu body-table-calendar" id="milieu-debut-fin"></td>
					<td class="milieu body-table-calendar" id="milieu-fin-fin"></td>
					<td class="milieu body-table-calendar" id="milieu-debut-week"></td>
					<td class="milieu body-table-calendar" id="milieu-fin-week"></td>
				</tr>
				<tr>
					<td class="fin body-table-calendar" id="fin-debut-debut"></td>
					<td class="fin body-table-calendar" id="fin-fin-debu"></td>
					<td class="fin body-table-calendar" id="fin-milieu"></td>
					<td class="fin body-table-calendar" id="fin-debut-fin"></td>
					<td class="fin body-table-calendar" id="fin-fin-fin"></td>
					<td class="fin body-table-calendar" id="fin-debut-week"></td>
					<td class="fin body-table-calendar" id="fin-fin-week"></td>
				</tr>
			</tbody>
		</table>
	</div>
	<div id="weather" class="dicton-container">
		<h1>Dicton du jour</h1>
		<p id="dicton"></p>
	</div>
	<div id="weather" class="weather-container">
		<h1>Météo</h1>
		<div id="local-wheather">
			<button id="local-button-lille" class="local-buttons active" onclick="setCity('lille')">Lille</button>
			<button id="local-button-calais" class="local-buttons" onclick="setCity('calais')">Calais</button>
			<button id="local-button-geoloc" class="local-buttons" onclick="setCity('geoloc')">Géoloc</button>
		</div>
		<p id="weather-description"></p>
		<table id="weather-table" title="Clique Pour voir le dans le futur!">
			<thead>
				<tr>
					<th class="head-table-weather">Température</th>
					<th class="head-table-weather">Direction du vent</th>
					<th class="head-table-weather">Vitesse du vent</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td class="body-table-weather" id="temperature"></td>
					<td class="body-table-weather" id="direction-vent"></td>
					<td class="body-table-weather" id="force-vent"></td>
				</tr>
			</tbody>
		</table>
		<table id="hourly-weather-table" style="display:none; margin-top:20px;">
			<thead>
				<tr>
					<th class="head-table-weather">Heure</th>
					<th class="head-table-weather">Temp (°C)</th>
					<th class="head-table-weather">Condition</th>
					<th class="head-table-weather">Vent (km/h)</th>
				</tr>
			</thead>
			<tbody id="hourly-weather-body"></tbody>
		</table>
		<button id="toggle-compass-button" onclick="toggleCompass()">J'ai pas compris</button>
		<div class="wind-compass" id="compass" style="display: none;">
			<p>T'as pas compris ? Voici un dessin:</p>
			<svg viewBox="0 0 300 300" class="compass-svg">
				<!-- Cercle de base -->
				<circle id="cercle-cardinal" cx="150" cy="150" r="141" />
				<circle id="cercle-direction-vent" cx="150" cy="150" r="100" />

				<!-- Curseur direction vent -->
				<polygon id="wind-arrow" points="0,-100 10,0 -10,0" fill="red"
					transform="translate(150,150) rotate(45)" />

				<!-- Points cardinaux -->
				<!-- NE -->
				<circle cx="150" cy="30" r="18" fill="white" />
				<text x="150" y="35" text-anchor="middle" font-weight="bold">N</text>
				<!-- NE -->
				<circle cx="235" cy="65" r="18" fill="white" />
				<text x="235" y="70" text-anchor="middle" font-weight="bold">NE</text>
				<!-- E -->
				<circle cx="270" cy="150" r="18" fill="white" />
				<text x="270" y="155" text-anchor="middle" font-weight="bold">E</text>
				<!-- SE -->
				<circle cx="235" cy="235" r="18" fill="white" />
				<text x="235" y="240" text-anchor="middle" font-weight="bold">SE</text>
				<!-- S -->
				<circle cx="150" cy="270" r="18" fill="white" />
				<text x="150" y="275" text-anchor="middle" font-weight="bold">S</text>
				<!-- SW -->
				<circle cx="65" cy="235" r="18" fill="white" />
				<text x="65" y="240" text-anchor="middle" font-weight="bold">SO</text>
				<!-- W -->
				<circle cx="30" cy="150" r="18" fill="white" />
				<text x="30" y="155" text-anchor="middle" font-weight="bold">O</text>
				<!-- NW -->
				<circle cx="65" cy="65" r="18" fill="white" />
				<text x="65" y="70" text-anchor="middle" font-weight="bold">NO</text>

				<!-- Cercle central avec force -->
				<circle id="cercle-force-vent" cx="150" cy="150" r="40" />
				<text id="wind-speed" x="150" y="155" text-anchor="middle" font-size="12">0 km/h</text>
			</svg>
		</div>
	</div>
	<div id="games" class="games-container">
		<h1>Un petit jeu ?</h1>
		<div style="text-align: center;">
			<button id="toggle-snake-button" onclick="toggleSnake()">Snake</button>
		</div>
		
		<div id="snake-game" style="display: none;">
			<div class="snake-container">
				<div class="snake-screen">
					<canvas id="snake" width="400" height="400"></canvas>
				</div>
				<div class="snake-info">
					<p id="score-snake">Score: 0</p>
				</div>
			</div>
			<script>
				const canvas = document.getElementById("snake");
				const ctx = canvas.getContext("2d");

				const gridSize = 20;
				const tileCount = canvas.width / gridSize;

				let snake = [{ x: 10, y: 10 }];
				let velocity = { x: 0, y: 0 };
				let food = { x: 15, y: 15 };
				let tail = 5;
				let score = 0;
				let isGameOver = false;
				const scoreDisplay = document.getElementById("score-snake");


				function gameLoop() {
					requestAnimationFrame(gameLoop);
					if (++count < 6) return; // slow the loop
					count = 0;

					// move snake
					const head = { x: snake[0].x + velocity.x, y: snake[0].y + velocity.y };
					snake.unshift(head);

					// check collision with food
					if (head.x === food.x && head.y === food.y) {
						tail++;
						food = {
							x: Math.floor(Math.random() * tileCount),
							y: Math.floor(Math.random() * tileCount)
						};
						score++;
						scoreDisplay.textContent = "Score: " + score;
					}

					// trim snake
					while (snake.length > tail) snake.pop();

					// check wall or self collision
					if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount || snake.slice(1).some(s => s.x === head.x && s.y === head.y)) {
						snake = [{ x: 10, y: 10 }];
						velocity = { x: 0, y: 0 };
						tail = 5;
						isGameOver = true;
					}

					// draw board
					ctx.fillStyle = "#222";
					ctx.fillRect(0, 0, canvas.width, canvas.height);

					// draw food
					ctx.fillStyle = "#ff4444";
					ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize - 2, gridSize - 2);

					// draw snake
					ctx.fillStyle = "#00ffcc";
					for (const s of snake) {
						ctx.fillRect(s.x * gridSize, s.y * gridSize, gridSize - 2, gridSize - 2);
					}
				}

				let count = 0;
				requestAnimationFrame(gameLoop);

				document.addEventListener("keydown", (e) => {
					if (isGameOver) {
						score = 0;
						scoreDisplay.textContent = "Score: " + score;
						isGameOver = false;
					}
					switch (e.key) {
						case "ArrowLeft": if (velocity.x !== 1) velocity = { x: -1, y: 0 }; break;
						case "ArrowUp": if (velocity.y !== 1) velocity = { x: 0, y: -1 }; break;
						case "ArrowRight": if (velocity.x !== -1) velocity = { x: 1, y: 0 }; break;
						case "ArrowDown": if (velocity.y !== -1) velocity = { x: 0, y: 1 }; break;
					}
				});
			</script>
		</div>

	</div>

	<script src="script.js"></script>
</body>
<footer>
	<p>v2.7.0 |
		<a href="https://github.com/Bledet/onestquanddanslasemaine" target="_blank" style="text-decoration: none;">
			GitHub
		</a>
	</p>
</footer>

</html>